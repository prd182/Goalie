define(['views/field-view', 'services/fieldService','views/fieldinfo-view','views/login-view'], function(fieldView, fieldService,fieldInfoView,loginView){
    var externals = {};
    var internals = {};

    externals.start = function(){
        internals.bindEventHandlers();
        fieldService.getFields(function(film){
            console.log("tou aqui");
            fieldView.render(film);
        });
    };

    internals.bindEventHandlers = function(){
        fieldView.bind('campButtons', internals.buttonHandler);
        fieldInfoView.bind('registerButton',internals.registerButtonHandler)

    };

    internals.buttonHandler = function(event){
        let currentField = event.currentTarget.id.split("field-")[1];
        console.log(currentField);
        fieldService.fieldId = currentField;
        fieldService.getFieldInfo(function(currentField){
            fieldInfoView.render(currentField);
        });

    }
        internals.registerButtonHandler = function(event){
            console.log(event);
            // fieldService.addUserToMatch(function(field){
            //     fieldInfoView.render(field);
            // });
            console.log("REGISTER BUTTON");
        }
    
    
        


    return externals;
});